# Список изменений с версии 1.3.1

## Новые функции

* Список команд бота обновляется при каждом рестарте бота
* Макросы добавлены в список команд бота (спиок обрезается до 100 первых элементов)
* Сохренение данных собранного лапса в переменные служебного макроса + вызов макроса, заданного в конфиге, после сборки лапса
* Уведомление об ошибках/падениеях клиппера
* Доабвлено вращение изображения камеры
* Единое обновляемое сообщение с процессом печати. Ручные уведомления/ошибки идут отдельно!
* tgnotify_manual_status - добавление произвольного текста в конец статусного сообщения/уведомления по тригерам.
* Параметр message_parts - редактируем состав уведомления по триггерам и статусного сообщения

## Добработки и мелкие исправления

* Авторизация в moonraker при инициализации экзамеляра класса klippy
* Переработано получение данных о датчиках. Используется подписка через websocket. Добавлены emoji типов датчиков.
* Удалены лишние данные из статусного сообщения. Информация статусного сообщения обьединена с сообщением о процессе печати.
* Добавлена библиотека ujson для ускорения парсинга json.
* Подтверждение для runtime parameters
* Переработана запись видео. длительность видео теперь соответсвует заданной в конфиге. Большие видео могу требовать много памяти!
* Добавлено превью для меню files
* Новые изображения при отсутствии превью гкода и отсутствии изображения с камеры. Папка imgs болше не копируется в каталог конфигураций клиппера (используется папка из репозитория).
* Удалена кнопка photo
* Исправлен поиск несобарнных лапсов с длинными именами (длиннее 54 символов)
* Парсинг конфига вынесен в отдельные классы
* Исправлено сообщение неавторизованного доступа

## Описать в документации

* Фильтрация макросов (_, show_hidden_macros, disabled_macros)
* Вращение камеры
* Отключение режима единого сообщения с процессом печати
* Служебный макрос с данными о собранном лапсе.
* Описать 'progress_notification.group_only'